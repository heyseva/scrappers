const input = [
  {
    year: 2019,
    months: {
      dec: 1,
      jan: 0,
      feb: 0,
      mar: 0,
      apr: 0,
      may: 0,
      jun: 0,
      jul: 0,
      aug: 0,
      sep: 0,
      oct: 0,
      nov: 0,
    },
    types: {
      dec: [
        {
          type: "post",
          count: 1,
        },
      ],
      jan: [],
      feb: [],
      mar: [],
      apr: [],
      may: [],
      jun: [],
      jul: [],
      aug: [],
      sep: [],
      oct: [],
      nov: [],
    },
  },
  {
    year: 2021,
    months: {
      oct: 1,
      jan: 0,
      feb: 0,
      mar: 0,
      apr: 0,
      may: 0,
      jun: 0,
      jul: 0,
      aug: 0,
      sep: 0,
      nov: 0,
      dec: 0,
    },
    types: {
      oct: [
        {
          type: "post",
          count: 1,
        },
      ],
      jan: [],
      feb: [],
      mar: [],
      apr: [],
      may: [],
      jun: [],
      jul: [],
      aug: [],
      sep: [],
      nov: [],
      dec: [],
    },
  },
  {
    year: 2023,
    months: {
      oct: 38,
      nov: 25,
      dec: 27,
      jan: 0,
      feb: 0,
      mar: 0,
      apr: 0,
      may: 0,
      jun: 0,
      jul: 0,
      aug: 0,
      sep: 0,
    },
    types: {
      oct: [
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
      ],
      nov: [
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
      ],
      dec: [
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
      ],
      jan: [],
      feb: [],
      mar: [],
      apr: [],
      may: [],
      jun: [],
      jul: [],
      aug: [],
      sep: [],
    },
  },
  {
    year: 2024,
    months: {
      jan: 16,
      feb: 33,
      mar: 43,
      apr: 49,
      may: 8,
      jun: 0,
      jul: 0,
      aug: 0,
      sep: 0,
      oct: 0,
      nov: 0,
      dec: 0,
    },
    types: {
      jan: [
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
      ],
      feb: [
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
      ],
      mar: [
        {
          type: "story",
          count: 1,
        },
        {
          type: "story",
          count: 1,
        },
        {
          type: "story",
          count: 1,
        },
        {
          type: "story",
          count: 1,
        },
        {
          type: "story",
          count: 1,
        },
        {
          type: "story",
          count: 1,
        },
        {
          type: "story",
          count: 1,
        },
        {
          type: "story",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
      ],
      apr: [
        {
          type: "story",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
      ],
      may: [
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "post",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
        {
          type: "reels",
          count: 1,
        },
      ],
      jun: [],
      jul: [],
      aug: [],
      sep: [],
      oct: [],
      nov: [],
      dec: [],
    },
  },
];

const transformData = (data) => {
  return data.map((entry) => {
    // Create a map to merge counts and types by month
    const monthsMap = {};

    // Populate the map with counts
    Object.entries(entry.months).forEach(([month, count]) => {
      if (!monthsMap[month]) {
        monthsMap[month] = {
          month,
          count,
          type: { post: 0, reels: 0, story: 0 },
        };
      } else {
        monthsMap[month].count = count;
      }
    });

    // Populate the map with types
    Object.entries(entry.types).forEach(([month, types]) => {
      if (!monthsMap[month]) {
        monthsMap[month] = {
          month,
          count: 0,
          type: { post: 0, reels: 0, story: 0 },
        };
      }
      types.forEach((item) => {
        monthsMap[month].type[item.type] += item.count;
      });
    });

    // Convert the map back to an array
    const monthsArray = Object.values(monthsMap);

    return {
      year: entry.year,
      months: monthsArray,
    };
  });
};

console.log(JSON.stringify(transformData(input), null, 2));
